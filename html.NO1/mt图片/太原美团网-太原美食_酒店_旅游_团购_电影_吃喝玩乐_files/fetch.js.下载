;!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function o(t){this.map={};var e=this;t instanceof o?t.forEach(function(t,o){o.forEach(function(o){e.append(t,o)})}):t&&Object.getOwnPropertyNames(t).forEach(function(o){e.append(o,t[o])})}function r(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function n(t){return new Promise(function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),n(e)}function s(t){var e=new FileReader;return e.readAsText(t),n(e)}function a(){return this.bodyUsed=!1,d.blob?(this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):(this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},this.text=function(){var t=r(this);return t||Promise.resolve(this._bodyText)}),d.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return c.indexOf(e)>-1?e:t}function f(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new o(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var o=t.split("="),r=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function l(t){var e=new o;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var o=t.trim().split(":"),r=o.shift().trim(),n=o.join(":").trim();e.append(r,n)}),e}function p(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers,this.url=e.url||""}if(Object.entries=function(t){for(var e=Object.keys(t),o=e.length,r=new Array(o);o--;)r[o]=[e[o],t[e[o]]];return r},!self.fetch){o.prototype.append=function(o,r){o=t(o),r=e(r);var n=this.map[o];n||(n=[],this.map[o]=n),n.push(r)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var o=this.map[t(e)];return o?o[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(o,r){this.map[t(o)]=[e(r)]},o.prototype.forEach=function(t){var e=this;Object.getOwnPropertyNames(this.map).forEach(function(o){t(o,e.map[o])})};var d={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,XDomainRequest:"XDomainRequest"in self},c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.fetch=function(){var t=this;return new Promise(function(e,o){function r(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var n=!1;if(d.XDomainRequest){var i=location.protocol+"//"+location.host;/^\/[^\/]/.test(t.url)||(n=(/^\/\//.test(t.url)?location.protocol+t.url:t.url).substring(0,i.length)!==i)}var s=n?new XDomainRequest:new XMLHttpRequest;n?s.getAllResponseHeaders=function(){return"Content-Type: "+s.contentType}:"cors"===t.credentials&&(s.withCredentials=!0),s.onload=function(){var t=1223===s.status?204:s.status;if(n&&(t=200),t<100||t>599)return void o(new TypeError("Network request failed"));var i={status:t,statusText:s.statusText,headers:l(s),url:r()},a="response"in s?s.response:s.responseText;e(new p(a,i))},s.onerror=function(){o(new TypeError("Network request failed"))},s.open(t.method,t.url,!0),"responseType"in s&&d.blob&&(s.responseType="blob"),t.headers.forEach(function(t,e){e.forEach(function(e){s.setRequestHeader(t,e)})});var a=s.send.bind(s,"undefined"==typeof t._bodyInit?null:t._bodyInit);n?(s.onprogress=s.onprogress||function(){},s.ontimeout=s.ontimeout||function(){},setTimeout(function(){a()})):a()})},a.call(f.prototype),a.call(p.prototype),self.Headers=o,self.Request=f,self.Response=p,self.fetch=function(t,e){return new f(t,e).fetch()},self.fetch.polyfill=!0}}();
